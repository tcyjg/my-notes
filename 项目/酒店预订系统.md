**项目简介**：酒店预订系统，帮助用户完成在线预订酒店，方便旅行的人员的出行安排。项目基础架构采用JDK17、SpringCloud构建，完成会员注册、酒店查询、优惠券秒杀，预订房间下单，以及支付等业务。底层采用缓存、消息队列以及分库分表等技术支持海量用户预订房间以及数据存储。
**项目亮点:**
1.注册业务**缓存穿透问题**：**布隆过滤器**解决缓存穿透，用Redis的Set存注销过的用户名，解决用户名复用问题。
2.身份校验问题：使用**双token验证**+redis储存，实现自动续期和实现手动强制下线功能，保证用户安全。（sa-token）

3.**分库分表**读扩散问题：选取合适的分片键与算法，结合**基因法**按需路由，精准定位分片，提升读写性能。

%% 4.**瞬时高并发**压垮系统问题：基于Redis实现令牌限流容器，控制获取分布式锁的用户数量，并降低锁粒度。
 %%
5.优惠券数据库缓存一致性问题：基于Canal监听Binlog并通过RocketMQ异步更新缓存，实现最终一致性。

6.优雅设计思想与实现:
- 分析场景与页面交互行为，使用Redis做车票搜索，替代了ElasticSearch。
- 对比XXL-Job、Redis过期监听等技术，最终选取RocketMQ5.x作为延时关闭订单功能的选型。
- 使用责任链模式、策略模式等设计模式来实现高内聚低耦合，并且结合SpringlOC容器使得模式符合开闭原则。

Q1:使用布隆过滤器解决缓存穿透：
[缓存穿透的解决方式？—布隆过滤器 - 程序员Seven - 博客园](https://www.cnblogs.com/sevencoding/p/18845591)
布隆过滤器使用位数组

Q2:实现自动续期+自动下线的逻辑？
redis在登录时，在redis的user:online的key中进行保存用户的id并设置过期时间（refresh_time），当每次用户访问时，先进行判断token是否过期，如果过期，再进行刷新token，如果refreshtoken也过期了，用户就下线了。

