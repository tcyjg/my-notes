# HTTP协议
HTTP 是超文本传输协议，也就是**H**yper**T**ext **T**ransfer **P**rotocol

## 跨域请求：
http ://服务器:端口/地址， 其中如果协议/服务器（域名）/端口 不一样，就是跨域了。
跨域问题是因为浏览器不允许，服务器还是能够正常处理信息的，浏览器会禁止接收消息。
解决方法，服务端处理跨域请求，响应添加一些响应头access-control-allow-origin，使浏览器允许跨域。
![[Pasted image 20260128102641.png]]

## 对称加密和非对称加密
### 1. 非对称加密
能够保证信息传递的保密性（）
![[Pasted image 20260128102826.png]]
但是非对称加密非常耗时，所以采用非对称加密进行传递对称加密的密钥或者加密参数，实现
### 2. 混合加密
![[Pasted image 20260128103044.png]]
保证保密性

### 3.数字签名
保证传输数据的一致性（确保传输数据能够）
在混合加密的过程中添加了一次不对称加密，计算散列值并使用私钥进行加密，然后接收端使用公钥进行解密，验证接受到的信息散列值是否相同
![[Pasted image 20260128104800.png]]

### 4. 公钥证书（对公钥进行加密）
保证公钥的合法性，防止第三方伪造公钥
解决：认证机构进行数字签名私钥加密，客户端使用认证机构的公钥解密并得到数字签名，数字签名再校验，使用服务器公钥解密后的信息
![[Pasted image 20260128113938.png]]

如果第三方
![[Pasted image 20260128114019.png]]

如果自己伪造证书，浏览器会进行提醒是否信任当前证书。
如果你想去第三方去认证一个证书，
认证机构不会轻易随便颁发证书（会校验你是否是这个域名的所拥有者），

CA 要求你在域名的 DNS 里添加一条 **指定内容的记录**
比如TXT记录：
```txt
_acme-challenge.example.com
TXT "random-string-from-ca"
```
保证你是这个域名的拥有者，才会给你办法证书。

##### 抓包工具为什么能够抓取HTTPS
因为使用抓包工具进行 HTTPS 抓包的时候，需要在客户端安装 Fiddler 的根证书，这里实际上起认证中心（CA）的作用。
==污染根CA认证==
抓包工具能够抓包的关键是客户端会往系统受信任的根证书列表中导入抓包工具生成的证书，而这个证书会被浏览器信任，也就是抓包工具给自己创建了一个认证中心 CA，客户端拿着中间人签发的证书去中间人自己的 CA 去认证，当然认为这个证书是有效的。
# Question
#### 1. 网页中输入网址，整个流程
1. http: 网址 https://www.baidu.com/index.html, 前面http 或者https 是访问数据的协议，www.baidu.com 是服务器，index.html是资源。生成http请求信息，请求行，请求头，请求体
2. DNS：解析域名到真实服务器ip地址。解析流程:  本机缓存表格  --> 顶级域名服务器 -->（ .com，.cn) 区域域名服务器 --> 权威域名服务器  
3. 建立连接：
   建立tcp连接：（SYN：请求  ACK：回复  RST: 重新连接 FIN: 结束连接）
	- 一开始，客户端和服务端都处于 `CLOSED` 状态。先是服务端主动监听某个端口，处于 `LISTEN` 状态。
	- 然后客户端主动发起连接 `SYN`，之后处于 `SYN-SENT` 状态。
	- 服务端收到发起的连接，返回 `SYN`，并且 `ACK` 客户端的 `SYN`，之后处于 `SYN-RCVD` 状态。
	- 客户端收到服务端发送的 `SYN` 和 `ACK` 之后，发送对 `SYN` 确认的 `ACK`，之后处于 `ESTABLISHED` 状态，因为它一发一收成功了
		
4. 发送http请求：
	**HTTP 请求**在应用层生成，经 TCP（传输层）、IP（网络层）、以太网（链路层）逐层封装后，最终以以太网帧的形式在链路上传输
5. 服务器处理并返回响应
6. 浏览器解析与渲染
7. 加载子资源
8. 关闭连接


#### 