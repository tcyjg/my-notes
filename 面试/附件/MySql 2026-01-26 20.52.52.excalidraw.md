---

excalidraw-plugin: parsed
tags: [excalidraw]

---
==⚠  Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. ⚠== You can decompress Drawing data with the command palette: 'Decompress current Excalidraw file'. For more info check in plugin settings under 'Saving'


# Excalidraw Data

## Text Elements
请求 update students set name = zhangsan where id = 1 ^PF4bUNRY

1. 找到id = 1 的磁盘页，并加载到buffer pool 中  ^6gm6vymD

2. 记录undo log，并修改buffer pool 中的值 ^GTLm13H5

3. 生成redo log，写在redo log buffer  ^l4rnsbVU

4. 事务提交，（redo log 刷盘,buffer 写入文件） ^IjWlpXQQ

sql执行的的过程 ^HOMQ3rjO

Checkpoint：
1.  redo log 快写满
2. Buffer Pool 空间不足
3. 需要淘汰页
4. 后台线程周期性刷盘
5. 数据库正常关闭
6. 脏页比例过高 ^1rUyTFFd

实现buffer pool 刷盘，
更新脏页
（因为是异步顺序io相对较快） ^SB9QQZX0

%%
## Drawing
```compressed-json
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
```
%%